angular.module("event",[]),angular.module("profile",["ngMessages","ngAnimate","ui.bootstrap"]),angular.module("auth",["ngMessages"]),angular.module("admin",[]),function(){var e=function(e){var t=function(){function t(e){return e.data}function n(e){console.log("Failure: "+e)}var a="/api/status";return e({method:"GET",url:a}).then(t,n)};return{getMStatus:t}};angular.module("profile").factory("mStatusService",["$http",e])}(),function(){var e=function(e){var t=function(){function t(e){return e.data}function n(e){console.log("Failure: "+e)}var a="/api/jobs";return e({method:"GET",url:a}).then(t,n)};return{getJobs:t}};angular.module("profile").factory("jobService",["$http",e])}(),function(){var e=function(e){var t=function(){function t(e){return e.data}function n(e){console.log("Failure: "+e)}var a="/api/countries";return e({method:"GET",url:a}).then(t,n)};return{getCountries:t}};angular.module("profile").factory("countryService",["$http",e])}(),function(){var e=function(e){var t=function(){function t(e){return e.data}function n(e){console.log("Failure: "+e.data)}var a="/api/profile/:_id";return e({method:"GET",url:a}).then(t,n)};return{getById:t}};angular.module("profile").factory("certainUserService",["$http",e])}(),function(){"use strict";var e=function(e,t,n,a,r,o,i){a.getMStatus().then(function(t){e.status=t}),r.getJobs().then(function(t){e.jobs=t}),o.getCountries().then(function(t){e.countries=t}),i.getById().then(function(t){e.profile=t}),e.submitForm=function(){function n(e){return e.data}function a(e){}e.formData=JSON.stringify({firstName:this.firstName,lastName:this.lastName,email:this.email,gender:this.gender,marital:this.marital.name,birthday:this.dt,work:this.work.name,country:this.country.name,city:this.city,interests:this.interests,description:this.description}),t.post("/api/profile/:id",e.formData).then(n,a)},e.today=function(){e.dt=new Date},e.today(),e.clear=function(){e.dt=null},e.disabled=function(e,t){return"day"===t&&(0===e.getDay()||6===e.getDay())},e.toggleMin=function(){e.minDate=new Date(1900,1,1)},e.toggleMin(),e.maxDate=new Date(2020,5,22),e.open=function(t){e.status.opened=!0},e.setDate=function(t,n,a){e.dt=new Date(t,n,a)},e.dateOptions={formatYear:"yy",startingDay:1},e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0],e.status={opened:!1};var u=new Date;u.setDate(u.getDate()+1);var s=new Date;s.setDate(u.getDate()+2),e.events=[{date:u,status:"full"},{date:s,status:"partially"}],e.getDayClass=function(t,n){if("day"===n)for(var a=new Date(t).setHours(0,0,0,0),r=0;r<e.events.length;r++){var o=new Date(e.events[r].date).setHours(0,0,0,0);if(a===o)return e.events[r].status}return""},e.saveEdittedEvent=function(){var e=input.getElementsByTagName("input"),t=input.getElementsByTagName("textarea")[0],n=input.getElementsByTagName("select")[0],a=e[0].closest("form"),r=new XMLHttpRequest;r.open("GET","https://maps.googleapis.com/maps/api/geocode/json?address=Meulebeke+krinkelstraat&key=AIzaSyAiapygRLC6a3O-pyXahU2l47I8pMV2Pdw",!0),r.onload=function(o){var i=JSON.parse(r.responseText),u=i.results[0].geometry.location,s=u.lat,l=u.lng,c={id:a.id,picture:e.pictureUrl.value,title:e.etitle.value,date:e.date.value,time:e.time.value,location:e.Location.value+"/./"+s+"/./"+l,group:n.value,cost:e.cost.value,slots:e.slots.value,description:t.value};console.log(c);var d=new XMLHttpRequest;d.open("POST","/api/profile/updateEvent",!0),d.setRequestHeader("Content-type","application/json"),d.onload=function(e){document.location.reload(!0)},d.send(JSON.stringify(c))},r.send(null)},e.deleteEvent=function(e){var t=e.currentTarget.closest("tr"),a=t.getElementsByTagName("td"),r=a[1].children[2].innerText,o=n.confirm("Are you absolutely sure you want to delete?");if(o){var i={id:r},u=new XMLHttpRequest;u.open("POST","/api/profile/deleteEvent",!0),u.setRequestHeader("Content-type","application/json"),u.send(JSON.stringify(i)),u.onload=function(e){document.location.reload(!0)}}},e.editEvent=function(t){var n=t.currentTarget.closest("tr"),a=n.getElementsByTagName("td"),r=a.length,o=document.getElementById("input"),i=o.getElementsByTagName("input"),u=o.getElementsByTagName("textarea")[0],s=i[0].closest("form");e.updating=!0;for(var l=r;l--;){var c=a[l].className.split(" "),d=c[c.length-1];switch(d){case"image":break;case"name":i.etitle.value=a[l].innerText,i.Location.value=a[l].children[1].innerText,u.value=a[l].children[0].innerText,s.id=a[l].children[2].innerText;break;case"date":i.date.value=a[l].innerText;break;case"time":i.time.value=a[l].innerText;break;case"price":i.cost.value=a[l].innerText;break;case"maxMember":i.slots.value=a[l].innerText}}}};angular.module("profile").controller("ProfileController",["$scope","$http","$window","mStatusService","jobService","countryService","certainUserService",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1TdGF0dXNTZXJ2aWNlLmpzIiwiam9iU2VydmljZS5qcyIsImNvdW50cnlTZXJ2aWNlLmpzIiwiY2VydGFpblVzZXJTZXJ2aWNlLmpzIiwiUHJvZmlsZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsIm1TdGF0dXNTZXJ2aWNlIiwiJGh0dHAiLCJtU3RhdHVzIiwic3VjY2Vzc0NhbGxiYWNrIiwicmVzcG9uc2UiLCJkYXRhIiwiZXJyb3JDYWxsYmFjayIsImNvbnNvbGUiLCJsb2ciLCJ1cmwiLCJtZXRob2QiLCJ0aGVuIiwiZ2V0TVN0YXR1cyIsImZhY3RvcnkiLCJqb2JTZXJ2aWNlIiwiam9icyIsImdldEpvYnMiLCJjb3VudHJ5U2VydmljZSIsImNvdW50cmllcyIsImdldENvdW50cmllcyIsImNlcnRhaW5Vc2VyU2VydmljZSIsImJ5SWQiLCJnZXRCeUlkIiwiUHJvZmlsZUNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkd2luZG93Iiwic3RhdHVzIiwicHJvZmlsZSIsInN1Ym1pdEZvcm0iLCJmb3JtRGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdE5hbWUiLCJ0aGlzIiwibGFzdE5hbWUiLCJlbWFpbCIsImdlbmRlciIsIm1hcml0YWwiLCJuYW1lIiwiYmlydGhkYXkiLCJkdCIsIndvcmsiLCJjb3VudHJ5IiwiY2l0eSIsImludGVyZXN0cyIsImRlc2NyaXB0aW9uIiwicG9zdCIsInRvZGF5IiwiRGF0ZSIsImNsZWFyIiwiZGlzYWJsZWQiLCJkYXRlIiwibW9kZSIsImdldERheSIsInRvZ2dsZU1pbiIsIm1pbkRhdGUiLCJtYXhEYXRlIiwib3BlbiIsIiRldmVudCIsIm9wZW5lZCIsInNldERhdGUiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJkYXRlT3B0aW9ucyIsImZvcm1hdFllYXIiLCJzdGFydGluZ0RheSIsImZvcm1hdHMiLCJmb3JtYXQiLCJ0b21vcnJvdyIsImdldERhdGUiLCJhZnRlclRvbW9ycm93IiwiZXZlbnRzIiwiZ2V0RGF5Q2xhc3MiLCJkYXlUb0NoZWNrIiwic2V0SG91cnMiLCJpIiwibGVuZ3RoIiwiY3VycmVudERheSIsInNhdmVFZGl0dGVkRXZlbnQiLCJ2ZWxkZW4iLCJpbnB1dCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiZGVzYyIsImRyb3Bkb3duIiwiZm9ybSIsImNsb3Nlc3QiLCJ4bWxsb2NhdGlvbiIsIlhNTEh0dHBSZXF1ZXN0Iiwib25sb2FkIiwiZSIsImdlZ2V2ZXMiLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImxvY2F0aW9uIiwibGF0IiwibG5nIiwibWlqbm9iamVjdGplIiwiaWQiLCJwaWN0dXJlIiwidmFsdWUiLCJ0aXRsZSIsInRpbWUiLCJncm91cCIsImNvc3QiLCJzbG90cyIsInhtbEh0dHAiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZG9jdW1lbnQiLCJyZWxvYWQiLCJzZW5kIiwiZGVsZXRlRXZlbnQiLCJ0ciIsImN1cnJlbnRUYXJnZXQiLCJlbGVtZW50ZW4iLCJjaGlsZHJlbiIsImlubmVyVGV4dCIsImNvbmZpcm0iLCJlZGl0RXZlbnQiLCJsZW5ndGUiLCJnZXRFbGVtZW50QnlJZCIsInVwZGF0aW5nIiwiY2xhc3NuYW1lIiwiY2xhc3NOYW1lIiwic3BsaXQiLCJ0ZXN0IiwiY29udHJvbGxlciJdLCJtYXBwaW5ncyI6IkFBSUFBLFFBQUFDLE9BQUEsWUFDQUQsUUFBQUMsT0FBQSxXQUFBLGFBQUEsWUFBQSxpQkFDQUQsUUFBQUMsT0FBQSxRQUFBLGVBQ0FELFFBQUFDLE9BQUEsWUNKQSxXQUNBLEdBQUFDLEdBQUEsU0FBQUMsR0FFQSxHQUFBQyxHQUFBLFdBSUEsUUFBQUMsR0FBQUMsR0FDQSxNQUFBQSxHQUFBQyxLQUVBLFFBQUFDLEdBQUFGLEdBQ0FHLFFBQUFDLElBQUEsWUFBQUosR0FQQSxHQUFBSyxHQUFBLGFBQ0EsT0FBQVIsSUFBQVMsT0FBQSxNQUFBRCxJQUFBQSxJQUFBRSxLQUFBUixFQUFBRyxHQVVBLFFBQ0FNLFdBQUFWLEdBSUFKLFNBQUFD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QUFBRixFQUFBOUIscUJBQUEsTUFDQXFDLEVBQUFMLEVBQUFyQyxPQUVBSSxFQUFBMkIsU0FBQVksZUFBQSxTQUNBeEMsRUFBQUMsRUFBQUMscUJBQUEsU0FDQUMsRUFBQUYsRUFBQUMscUJBQUEsWUFBQSxHQUNBRyxFQUFBTCxFQUFBLEdBQUFNLFFBQUEsT0FJQTlELEdBQUFpRyxVQUFBLENBRUEsS0FBQSxHQUFBN0MsR0FBQTJDLEVBQUEzQyxLQUNBLENBRUEsR0FBQThDLEdBQUFSLEVBQUF0QyxHQUFBK0MsVUFBQUMsTUFBQSxLQUVBQyxFQUFBSCxFQUFBQSxFQUFBN0MsT0FBQSxFQUVBLFFBQUFnRCxHQUVBLElBQUEsUUFFQSxLQUNBLEtBQUEsT0FFQTdDLEVBQUEsT0FBQW9CLE1BQUFjLEVBQUF0QyxHQUFBd0MsVUFDQXBDLEVBQUEsU0FBQW9CLE1BQUFjLEVBQUF0QyxHQUFBdUMsU0FBQSxHQUFBQyxVQUNBakMsRUFBQWlCLE1BQUFjLEVBQUF0QyxHQUFBdUMsU0FBQSxHQUFBQyxVQUNBL0IsRUFBQWEsR0FBQWdCLEVBQUF0QyxHQUFBdUMsU0FBQSxHQUFBQyxTQUVBLE1BQ0EsS0FBQSxPQUVBcEMsRUFBQSxLQUFBb0IsTUFBQWMsRUFBQXRDLEdBQUF3QyxTQUNBLE1BQ0EsS0FBQSxPQUVBcEMsRUFBQSxLQUFBb0IsTUFBQWMsRUFBQXRDLEdBQUF3QyxTQUNBLE1BQ0EsS0FBQSxRQUVBcEMsRUFBQSxLQUFBb0IsTUFBQWMsRUFBQXRDLEdBQUF3QyxTQUNBLE1BQ0EsS0FBQSxZQUVBcEMsRUFBQSxNQUFBb0IsTUFBQWMsRUFBQXRDLEdBQUF3QyxhQWNBdEgsU0FBQUMsT0FBQSxXQUFBK0gsV0FBQSxxQkFBQSxTQUFBLFFBQUEsVUFBQSxpQkFBQSxhQUFBLGlCQUFBLHFCQUFBdkciLCJmaWxlIjoicHJvZmlsZS1wYWdlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBCcmVjaHQgb24gMjEvMTEvMjAxNS5cbiAqL1xuXG5hbmd1bGFyLm1vZHVsZSgnZXZlbnQnLFtdKTtcbmFuZ3VsYXIubW9kdWxlKCdwcm9maWxlJyxbJ25nTWVzc2FnZXMnLCduZ0FuaW1hdGUnLCd1aS5ib290c3RyYXAnXSk7XG5hbmd1bGFyLm1vZHVsZSgnYXV0aCcsWyduZ01lc3NhZ2VzJ10pO1xuYW5ndWxhci5tb2R1bGUoJ2FkbWluJyxbXSk7XG5cblxuXG5cbiIsIi8qKlxuICogQ3JlYXRlZCBieSBCcmVjaHQgb24gMTIvMTIvMjAxNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIG1TdGF0dXNTZXJ2aWNlID0gZnVuY3Rpb24oJGh0dHApIHtcblxuICAgICAgICB2YXIgbVN0YXR1cyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgdXJsID0gJy9hcGkvc3RhdHVzJztcbiAgICAgICAgICAgIHJldHVybiAgJGh0dHAoe21ldGhvZDogJ0dFVCcsIHVybDogdXJsfSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssZXJyb3JDYWxsYmFjayk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhaWx1cmU6IFwiICsgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIGdldE1TdGF0dXM6IG1TdGF0dXNcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgncHJvZmlsZScpLmZhY3RvcnkoJ21TdGF0dXNTZXJ2aWNlJyxbJyRodHRwJyxtU3RhdHVzU2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgQnJlY2h0IG9uIDE4LzEyLzIwMTUuXG4gKi9cbihmdW5jdGlvbigpe1xuICAgIHZhciBqb2JTZXJ2aWNlID0gZnVuY3Rpb24oJGh0dHApIHtcbiAgICAgICAgdmFyIGpvYnMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHVybCA9ICcvYXBpL2pvYnMnO1xuICAgICAgICAgICAgcmV0dXJuICAkaHR0cCh7bWV0aG9kOiAnR0VUJywgdXJsOiB1cmx9KS50aGVuKHN1Y2Nlc3NDYWxsYmFjayxlcnJvckNhbGxiYWNrKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbHVyZTogXCIgKyByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0Sm9iczogam9ic1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdwcm9maWxlJykuZmFjdG9yeSgnam9iU2VydmljZScsWyckaHR0cCcsam9iU2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgQnJlY2h0IG9uIDE4LzEyLzIwMTUuXG4gKi9cbihmdW5jdGlvbigpe1xuICAgIHZhciBjb3VudHJ5U2VydmljZSA9IGZ1bmN0aW9uKCRodHRwKSB7XG4gICAgICAgIHZhciBjb3VudHJpZXMgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHVybCA9ICcvYXBpL2NvdW50cmllcyc7XG4gICAgICAgICAgICByZXR1cm4gICRodHRwKHttZXRob2Q6ICdHRVQnLCB1cmw6IHVybH0pLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLGVycm9yQ2FsbGJhY2spO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGYWlsdXJlOiBcIiArIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIGdldENvdW50cmllczogY291bnRyaWVzXG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgncHJvZmlsZScpLmZhY3RvcnkoJ2NvdW50cnlTZXJ2aWNlJyxbJyRodHRwJyxjb3VudHJ5U2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgQnJlY2h0IG9uIDEvMDEvMjAxNi5cbiAqL1xuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGNlcnRhaW5Vc2VyU2VydmljZSA9IGZ1bmN0aW9uKCRodHRwKSB7XG5cbiAgICAgICAgdmFyIGJ5SWQgPSBmdW5jdGlvbigpe1xuICAgICAgICAgICAgdmFyIHVybCA9ICcvYXBpL3Byb2ZpbGUvOl9pZCc7XG4gICAgICAgICAgICByZXR1cm4gICRodHRwKHttZXRob2Q6ICdHRVQnLCB1cmw6IHVybH0pLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLGVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbHVyZTogXCIgK3Jlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIGdldEJ5SWQ6IGJ5SWRcbiAgICAgICAgfVxuXG5cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3Byb2ZpbGUnKS5mYWN0b3J5KCdjZXJ0YWluVXNlclNlcnZpY2UnLFsnJGh0dHAnLGNlcnRhaW5Vc2VyU2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgQnJlY2h0IG9uIDgvMTIvMjAxNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBQcm9maWxlQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwkaHR0cCwkd2luZG93LG1TdGF0dXNTZXJ2aWNlLGpvYlNlcnZpY2UsY291bnRyeVNlcnZpY2UsY2VydGFpblVzZXJTZXJ2aWNlKVxuICAgIHtcbiAgICAgICAgLy8gR0VUIE1hcml0YWwgc3RhdHVzLCBKb2JzLCBDb3VudHJpZXMgJiBDaXRpZXMgZnJvbSBTZXJ2aWNlcyArIGFkZCB0aGVtIHRvIHNjb3BlXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgIG1TdGF0dXNTZXJ2aWNlLmdldE1TdGF0dXMoKS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGpvYlNlcnZpY2UuZ2V0Sm9icygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAkc2NvcGUuam9icyA9IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvdW50cnlTZXJ2aWNlLmdldENvdW50cmllcygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAkc2NvcGUuY291bnRyaWVzID0gZGF0YTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2VydGFpblVzZXJTZXJ2aWNlLmdldEJ5SWQoKS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGUgPSBkYXRhO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIFN1Ym1pdCBmb3JtIHByb2ZpbGUgc2V0dGluZ3NcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAgICAgJHNjb3BlLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAkc2NvcGUuZm9ybURhdGEgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0aGlzLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdGhpcy5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICAgICAgICAgICAgICBnZW5kZXI6IHRoaXMuZ2VuZGVyLFxuICAgICAgICAgICAgICAgIG1hcml0YWw6IHRoaXMubWFyaXRhbC5uYW1lLFxuICAgICAgICAgICAgICAgIGJpcnRoZGF5OiB0aGlzLmR0LFxuICAgICAgICAgICAgICAgIHdvcms6IHRoaXMud29yay5uYW1lLFxuICAgICAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuY291bnRyeS5uYW1lLFxuICAgICAgICAgICAgICAgIGNpdHk6IHRoaXMuY2l0eSxcbiAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IHRoaXMuaW50ZXJlc3RzLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRodHRwLnBvc3QoXCIvYXBpL3Byb2ZpbGUvOmlkXCIsICRzY29wZS5mb3JtRGF0YSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssZXJyb3JDYWxsYmFjayk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKFwiRmFpbHVyZTogXCIgKyByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG5cblxuICAgICAgICAkc2NvcGUudG9kYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5kdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS50b2RheSgpO1xuXG4gICAgICAgICRzY29wZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5kdCA9IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRGlzYWJsZSB3ZWVrZW5kIHNlbGVjdGlvblxuICAgICAgICAkc2NvcGUuZGlzYWJsZWQgPSBmdW5jdGlvbihkYXRlLCBtb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gKCBtb2RlID09PSAnZGF5JyAmJiAoIGRhdGUuZ2V0RGF5KCkgPT09IDAgfHwgZGF0ZS5nZXREYXkoKSA9PT0gNiApICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZU1pbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLm1pbkRhdGUgPSBuZXcgRGF0ZSgxOTAwLDEsMSlcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZU1pbigpO1xuICAgICAgICAkc2NvcGUubWF4RGF0ZSA9IG5ldyBEYXRlKDIwMjAsIDUsIDIyKTtcblxuICAgICAgICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5vcGVuZWQgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXREYXRlID0gZnVuY3Rpb24oeWVhciwgbW9udGgsIGRheSkge1xuICAgICAgICAgICAgJHNjb3BlLmR0ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmRhdGVPcHRpb25zID0ge1xuICAgICAgICAgICAgZm9ybWF0WWVhcjogJ3l5JyxcbiAgICAgICAgICAgIHN0YXJ0aW5nRGF5OiAxXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmZvcm1hdHMgPSBbJ2RkLU1NTU0teXl5eScsICd5eXl5L01NL2RkJywgJ2RkLk1NLnl5eXknLCAnc2hvcnREYXRlJ107XG4gICAgICAgICRzY29wZS5mb3JtYXQgPSAkc2NvcGUuZm9ybWF0c1swXTtcblxuICAgICAgICAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAgICAgb3BlbmVkOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB0b21vcnJvdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICAgIHZhciBhZnRlclRvbW9ycm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgYWZ0ZXJUb21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDIpO1xuICAgICAgICAkc2NvcGUuZXZlbnRzID1cbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRvbW9ycm93LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdmdWxsJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiBhZnRlclRvbW9ycm93LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdwYXJ0aWFsbHknXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAkc2NvcGUuZ2V0RGF5Q2xhc3MgPSBmdW5jdGlvbihkYXRlLCBtb2RlKSB7XG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2RheScpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF5VG9DaGVjayA9IG5ldyBEYXRlKGRhdGUpLnNldEhvdXJzKDAsMCwwLDApO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wO2k8JHNjb3BlLmV2ZW50cy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXkgPSBuZXcgRGF0ZSgkc2NvcGUuZXZlbnRzW2ldLmRhdGUpLnNldEhvdXJzKDAsMCwwLDApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXlUb0NoZWNrID09PSBjdXJyZW50RGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmV2ZW50c1tpXS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2F2ZUVkaXR0ZWRFdmVudCA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuXG4gICAgICAgICAgICAvL2V2ZW50IGRhdGEgb3BzbGFhblxuICAgICAgICAgICAgdmFyIHZlbGRlbiA9IGlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIik7XG4gICAgICAgICAgICB2YXIgZGVzYyA9IGlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIilbMF07XG4gICAgICAgICAgICB2YXIgZHJvcGRvd24gPSBpbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNlbGVjdFwiKVswXTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gdmVsZGVuWzBdLmNsb3Nlc3QoXCJmb3JtXCIpO1xuXG5cblxuICAgICAgICAgICAvKiAkaHR0cC5nZXQoXCJodHRwOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/YWRkcmVzcz1NZXVsZWJla2Ura3JpbmtlbHN0cmFhdCZrZXk9QUl6YVN5QWlhcHlnUkxDNmEzTy1weVhhaFUybDQ3SThwTVYyUGR3XCIpLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLGVycm9yQ2FsbGJhY2spO1xuXG4gICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbHVyZTogXCIgKyByZXNwb25zZS5kYXRhKVxuICAgICAgICAgICAgIH0qL1xuICAgICAgICAgICAgdmFyIHhtbGxvY2F0aW9uID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4bWxsb2NhdGlvbi5vcGVuKFwiR0VUXCIsXCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uP2FkZHJlc3M9TWV1bGViZWtlK2tyaW5rZWxzdHJhYXQma2V5PUFJemFTeUFpYXB5Z1JMQzZhM08tcHlYYWhVMmw0N0k4cE1WMlBkd1wiLCB0cnVlKTtcblxuICAgICAgICAgICAgeG1sbG9jYXRpb24ub25sb2FkPWZ1bmN0aW9uKGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICB2YXIgZ2VnZXZlcyA9IEpTT04ucGFyc2UoeG1sbG9jYXRpb24ucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBnZWdldmVzW1wicmVzdWx0c1wiXVswXVtcImdlb21ldHJ5XCJdW1wibG9jYXRpb25cIl07XG4gICAgICAgICAgICAgICAgdmFyIGxhdCA9IGxvY2F0aW9uW1wibGF0XCJdO1xuICAgICAgICAgICAgICAgIHZhciBsbmcgPSBsb2NhdGlvbltcImxuZ1wiXTtcblxuICAgICAgICAgICAgICAgIHZhciBtaWpub2JqZWN0amUgPSB7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6Zm9ybS5pZCxcbiAgICAgICAgICAgICAgICAgICAgJ3BpY3R1cmUnOnZlbGRlbltcInBpY3R1cmVVcmxcIl0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICd0aXRsZSc6dmVsZGVuW1wiZXRpdGxlXCJdLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAnZGF0ZSc6dmVsZGVuW1wiZGF0ZVwiXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWUnOnZlbGRlbltcInRpbWVcIl0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICdsb2NhdGlvbic6dmVsZGVuW1wiTG9jYXRpb25cIl0udmFsdWUgK1wiLy4vXCIrbGF0K1wiLy4vXCIrbG5nLFxuICAgICAgICAgICAgICAgICAgICAnZ3JvdXAnOmRyb3Bkb3duLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAnY29zdCc6dmVsZGVuW1wiY29zdFwiXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgJ3Nsb3RzJzp2ZWxkZW5bXCJzbG90c1wiXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzpkZXNjLnZhbHVlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtaWpub2JqZWN0amUpO1xuICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKFwiUE9TVFwiLFwiL2FwaS9wcm9maWxlL3VwZGF0ZUV2ZW50XCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICAgICAgeG1sSHR0cC5vbmxvYWQ9ZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShtaWpub2JqZWN0amUpKTtcblxuXG5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4bWxsb2NhdGlvbi5zZW5kKG51bGwpO1xuXG5cblxuXG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZGVsZXRlRXZlbnQ9IGZ1bmN0aW9uKCRldmVudClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRyID0gJGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgndHInKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ZW4gPSB0ci5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpO1xuICAgICAgICAgICAgdmFyIGlkID0gZWxlbWVudGVuWzFdLmNoaWxkcmVuWzJdLmlubmVyVGV4dDtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZWxlbWVudGVuWzFdLmNoaWxkcmVuWzJdKTtcblxuICAgICAgICAgICAgdmFyIGRlbGV0ZUV2ZW50ID0gJHdpbmRvdy5jb25maXJtKCdBcmUgeW91IGFic29sdXRlbHkgc3VyZSB5b3Ugd2FudCB0byBkZWxldGU/Jyk7XG4gICAgICAgICAgICBpZihkZWxldGVFdmVudClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgbWlqbm9iamVjdGplID0ge1xuICAgICAgICAgICAgICAgICAgICAnaWQnIDogaWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKFwiUE9TVFwiLFwiL2FwaS9wcm9maWxlL2RlbGV0ZUV2ZW50XCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KG1pam5vYmplY3RqZSkpO1xuICAgICAgICAgICAgICAgIHhtbEh0dHAub25sb2FkPWZ1bmN0aW9uKGUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuZWRpdEV2ZW50ID0gZnVuY3Rpb24oJGV2ZW50KVxuICAgICAgICB7XG5cbiAgICAgICAgICAgIHZhciB0ciA9ICRldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ3RyJyk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudGVuID0gdHIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKTtcbiAgICAgICAgICAgIHZhciBsZW5ndGUgPSBlbGVtZW50ZW4ubGVuZ3RoO1xuXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0XCIpO1xuICAgICAgICAgICAgdmFyIHZlbGRlbiA9IGlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIik7XG4gICAgICAgICAgICB2YXIgZGVzYyA9IGlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIilbMF07XG4gICAgICAgICAgICB2YXIgZm9ybSA9IHZlbGRlblswXS5jbG9zZXN0KFwiZm9ybVwiKTtcblxuXG5cbiAgICAgICAgICAgICRzY29wZS51cGRhdGluZyA9IHRydWU7IC8vd2Vya3QgbmlldCBiY2F1c2UgYW5ndWxhclxuXG4gICAgICAgICAgICBmb3IodmFyIGkgPSBsZW5ndGU7aS0tOylcbiAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgIHZhciBjbGFzc25hbWUgPSBlbGVtZW50ZW5baV0uY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtcblxuICAgICAgICAgICAgICAgIHZhciB0ZXN0ID0gY2xhc3NuYW1lW2NsYXNzbmFtZS5sZW5ndGgtMV07XG4gICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZXN0KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2godGVzdClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbWFnZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8vY29uc29sZS5sb2coXCJpbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmVsZGVuW1wiZXRpdGxlXCJdLnZhbHVlPWVsZW1lbnRlbltpXS5pbm5lclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWxkZW5bXCJMb2NhdGlvblwiXS52YWx1ZSA9IGVsZW1lbnRlbltpXS5jaGlsZHJlblsxXS5pbm5lclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnZhbHVlPSBlbGVtZW50ZW5baV0uY2hpbGRyZW5bMF0uaW5uZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5pZD1lbGVtZW50ZW5baV0uY2hpbGRyZW5bMl0uaW5uZXJUZXh0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVsZGVuW1wiZGF0ZVwiXS52YWx1ZT1lbGVtZW50ZW5baV0uaW5uZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aW1lXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwidGltZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlbGRlbltcInRpbWVcIl0udmFsdWU9ZWxlbWVudGVuW2ldLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHJpY2VcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJwcmljZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlbGRlbltcImNvc3RcIl0udmFsdWU9ZWxlbWVudGVuW2ldLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibWF4TWVtYmVyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwibWVtYmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVsZGVuW1wic2xvdHNcIl0udmFsdWU9ZWxlbWVudGVuW2ldLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxuXG5cbiAgICBhbmd1bGFyLm1vZHVsZShcInByb2ZpbGVcIikuY29udHJvbGxlcignUHJvZmlsZUNvbnRyb2xsZXInLFsnJHNjb3BlJywnJGh0dHAnLCckd2luZG93JywnbVN0YXR1c1NlcnZpY2UnLCdqb2JTZXJ2aWNlJywnY291bnRyeVNlcnZpY2UnLCdjZXJ0YWluVXNlclNlcnZpY2UnLFByb2ZpbGVDb250cm9sbGVyXSk7XG5cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
