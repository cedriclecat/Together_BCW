angular.module("event",[]),angular.module("profile",["ngMessages","ngAnimate","ui.bootstrap"]),angular.module("auth",["ngMessages"]),angular.module("admin",[]),function(){var e=function(e){var t=function(){function t(e){return e.data}function n(e){console.log("Failure: "+e)}var a="/api/status";return e({method:"GET",url:a}).then(t,n)};return{getMStatus:t}};angular.module("profile").factory("mStatusService",["$http",e])}(),function(){var e=function(e){var t=function(){function t(e){return e.data}function n(e){console.log("Failure: "+e)}var a="/api/jobs";return e({method:"GET",url:a}).then(t,n)};return{getJobs:t}};angular.module("profile").factory("jobService",["$http",e])}(),function(){var e=function(e){var t=function(){function t(e){return e.data}function n(e){console.log("Failure: "+e)}var a="/api/countries";return e({method:"GET",url:a}).then(t,n)};return{getCountries:t}};angular.module("profile").factory("countryService",["$http",e])}(),function(){var e=function(e){var t=function(){for(var e={},t=window.location.search.substring(1),n=t.split("&"),a=0;a<n.length;a++){var o=n[a].split("=");if("undefined"==typeof e[o[0]])e[o[0]]=decodeURIComponent(o[1]);else if("string"==typeof e[o[0]]){var r=[e[o[0]],decodeURIComponent(o[1])];e[o[0]]=r}else e[o[0]].push(decodeURIComponent(o[1]))}return e}(),n=function(){function n(e){return e.data}function a(e){console.log("Failure: "+e.data)}var o="/api/profile/:_id?id="+t.id;return e({method:"GET",url:o}).then(n,a)};return{getById:n}};angular.module("profile").factory("certainUserService",["$http",e])}(),function(){"use strict";var e=function(e,t,n,a,o,r,i){a.getMStatus().then(function(t){e.status=t}),o.getJobs().then(function(t){e.jobs=t}),r.getCountries().then(function(t){e.countries=t}),i.getById().then(function(t){e.profile=t}),e.submitForm=function(){function n(e){return e.data}function a(e){}e.formData=JSON.stringify({firstName:this.firstName,lastName:this.lastName,email:this.email,gender:this.gender,marital:this.marital.name,birthday:this.dt,work:this.work.name,country:this.country.name,city:this.city,interests:this.interests,description:this.description}),t.post("/api/profile/:id",e.formData).then(n,a)},e.today=function(){e.dt=new Date},e.today(),e.clear=function(){e.dt=null},e.disabled=function(e,t){return"day"===t&&(0===e.getDay()||6===e.getDay())},e.toggleMin=function(){e.minDate=new Date(1900,1,1)},e.toggleMin(),e.maxDate=new Date(2020,5,22),e.open=function(t){e.status.opened=!0},e.setDate=function(t,n,a){e.dt=new Date(t,n,a)},e.dateOptions={formatYear:"yy",startingDay:1},e.formats=["dd-MMMM-yyyy","yyyy/MM/dd","dd.MM.yyyy","shortDate"],e.format=e.formats[0],e.status={opened:!1};var s=new Date;s.setDate(s.getDate()+1);var u=new Date;u.setDate(s.getDate()+2),e.events=[{date:s,status:"full"},{date:u,status:"partially"}],e.getDayClass=function(t,n){if("day"===n)for(var a=new Date(t).setHours(0,0,0,0),o=0;o<e.events.length;o++){var r=new Date(e.events[o].date).setHours(0,0,0,0);if(a===r)return e.events[o].status}return""},e.saveEdittedEvent=function(){var e=input.getElementsByTagName("input"),t=input.getElementsByTagName("textarea")[0],n=input.getElementsByTagName("select")[0],a=e[0].closest("form"),o=new XMLHttpRequest;o.open("GET","https://maps.googleapis.com/maps/api/geocode/json?address=Meulebeke+krinkelstraat&key=AIzaSyAiapygRLC6a3O-pyXahU2l47I8pMV2Pdw",!0),o.onload=function(r){var i=JSON.parse(o.responseText),s=i.results[0].geometry.location,u=s.lat,l=s.lng,c={id:a.id,picture:e.pictureUrl.value,title:e.etitle.value,date:e.date.value,time:e.time.value,location:e.Location.value+"/./"+u+"/./"+l,group:n.value,cost:e.cost.value,slots:e.slots.value,description:t.value};console.log(c);var d=new XMLHttpRequest;d.open("POST","/api/profile/updateEvent",!0),d.setRequestHeader("Content-type","application/json"),d.onload=function(e){document.location.reload(!0)},d.send(JSON.stringify(c))},o.send(null)},e.deleteEvent=function(e){var t=e.currentTarget.closest("tr"),a=t.getElementsByTagName("td"),o=a[1].children[2].innerText,r=n.confirm("Are you absolutely sure you want to delete?");if(r){var i={id:o},s=new XMLHttpRequest;s.open("POST","/api/profile/deleteEvent",!0),s.setRequestHeader("Content-type","application/json"),s.send(JSON.stringify(i)),s.onload=function(e){document.location.reload(!0)}}},e.editEvent=function(t){var n=t.currentTarget.closest("tr"),a=n.getElementsByTagName("td"),o=a.length,r=document.getElementById("input"),i=r.getElementsByTagName("input"),s=r.getElementsByTagName("textarea")[0],u=i[0].closest("form");e.updating=!0;for(var l=o;l--;){var c=a[l].className.split(" "),d=c[c.length-1];switch(d){case"image":break;case"name":i.etitle.value=a[l].innerText,i.Location.value=a[l].children[1].innerText,s.value=a[l].children[0].innerText,u.id=a[l].children[2].innerText;break;case"date":i.date.value=a[l].innerText;break;case"time":i.time.value=a[l].innerText;break;case"price":i.cost.value=a[l].innerText;break;case"maxMember":i.slots.value=a[l].innerText}}}};angular.module("profile").controller("ProfileController",["$scope","$http","$window","mStatusService","jobService","countryService","certainUserService",e])}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1TdGF0dXNTZXJ2aWNlLmpzIiwiam9iU2VydmljZS5qcyIsImNvdW50cnlTZXJ2aWNlLmpzIiwiY2VydGFpblVzZXJTZXJ2aWNlLmpzIiwiUHJvZmlsZUNvbnRyb2xsZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsIm1TdGF0dXNTZXJ2aWNlIiwiJGh0dHAiLCJtU3RhdHVzIiwic3VjY2Vzc0NhbGxiYWNrIiwicmVzcG9uc2UiLCJkYXRhIiwiZXJyb3JDYWxsYmFjayIsImNvbnNvbGUiLCJsb2ciLCJ1cmwiLCJtZXRob2QiLCJ0aGVuIiwiZ2V0TVN0YXR1cyIsImZhY3RvcnkiLCJqb2JTZXJ2aWNlIiwiam9icyIsImdldEpvYnMiLCJjb3VudHJ5U2VydmljZSIsImNvdW50cmllcyIsImdldENvdW50cmllcyIsImNlcnRhaW5Vc2VyU2VydmljZSIsIlF1ZXJ5U3RyaW5nIiwicXVlcnlfc3RyaW5nIiwicXVlcnkiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0cmluZyIsInZhcnMiLCJzcGxpdCIsImkiLCJsZW5ndGgiLCJwYWlyIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiYXJyIiwicHVzaCIsImJ5SWQiLCJpZCIsImdldEJ5SWQiLCJQcm9maWxlQ29udHJvbGxlciIsIiRzY29wZSIsIiR3aW5kb3ciLCJzdGF0dXMiLCJwcm9maWxlIiwic3VibWl0Rm9ybSIsImZvcm1EYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsImZpcnN0TmFtZSIsInRoaXMiLCJsYXN0TmFtZSIsImVtYWlsIiwiZ2VuZGVyIiwibWFyaXRhbCIsIm5hbWUiLCJiaXJ0aGRheSIsImR0Iiwid29yayIsImNvdW50cnkiLCJjaXR5IiwiaW50ZXJlc3RzIiwiZGVzY3JpcHRpb24iLCJwb3N0IiwidG9kYXkiLCJEYXRlIiwiY2xlYXIiLCJkaXNhYmxlZCIsImRhdGUiLCJtb2RlIiwiZ2V0RGF5IiwidG9nZ2xlTWluIiwibWluRGF0ZSIsIm1heERhdGUiLCJvcGVuIiwiJGV2ZW50Iiwib3BlbmVkIiwic2V0RGF0ZSIsInllYXIiLCJtb250aCIsImRheSIsImRhdGVPcHRpb25zIiwiZm9ybWF0WWVhciIsInN0YXJ0aW5nRGF5IiwiZm9ybWF0cyIsImZvcm1hdCIsInRvbW9ycm93IiwiZ2V0RGF0ZSIsImFmdGVyVG9tb3Jyb3ciLCJldmVudHMiLCJnZXREYXlDbGFzcyIsImRheVRvQ2hlY2siLCJzZXRIb3VycyIsImN1cnJlbnREYXkiLCJzYXZlRWRpdHRlZEV2ZW50IiwidmVsZGVuIiwiaW5wdXQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImRlc2MiLCJkcm9wZG93biIsImZvcm0iLCJjbG9zZXN0IiwieG1sbG9jYXRpb24iLCJYTUxIdHRwUmVxdWVzdCIsIm9ubG9hZCIsImUiLCJnZWdldmVzIiwicGFyc2UiLCJyZXNwb25zZVRleHQiLCJsYXQiLCJsbmciLCJtaWpub2JqZWN0amUiLCJwaWN0dXJlIiwidmFsdWUiLCJ0aXRsZSIsInRpbWUiLCJncm91cCIsImNvc3QiLCJzbG90cyIsInhtbEh0dHAiLCJzZXRSZXF1ZXN0SGVhZGVyIiwiZG9jdW1lbnQiLCJyZWxvYWQiLCJzZW5kIiwiZGVsZXRlRXZlbnQiLCJ0ciIsImN1cnJlbnRUYXJnZXQiLCJlbGVtZW50ZW4iLCJjaGlsZHJlbiIsImlubmVyVGV4dCIsImNvbmZpcm0iLCJlZGl0RXZlbnQiLCJsZW5ndGUiLCJnZXRFbGVtZW50QnlJZCIsInVwZGF0aW5nIiwiY2xhc3NuYW1lIiwiY2xhc3NOYW1lIiwidGVzdCIsImNvbnRyb2xsZXIiXSwibWFwcGluZ3MiOiJBQUlBQSxRQUFBQyxPQUFBLFlBQ0FELFFBQUFDLE9BQUEsV0FBQSxhQUFBLFlBQUEsaUJBQ0FELFFBQUFDLE9BQUEsUUFBQSxlQUNBRCxRQUFBQyxPQUFBLFlDSkEsV0FDQSxHQUFBQyxHQUFBLFNBQUFDLEdBRUEsR0FBQUMsR0FBQSxXQUlBLFFBQUFDLEdBQUFDLEdBQ0EsTUFBQUEsR0FBQUMsS0FFQSxRQUFBQyxHQUFBRixHQUNB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QWMsRUFBQWhHLEdBQUFpRyxTQUFBLEdBQUFDLFVBQ0EvQixFQUFBZSxNQUFBYyxFQUFBaEcsR0FBQWlHLFNBQUEsR0FBQUMsVUFDQTdCLEVBQUE5RCxHQUFBeUYsRUFBQWhHLEdBQUFpRyxTQUFBLEdBQUFDLFNBRUEsTUFDQSxLQUFBLE9BRUFsQyxFQUFBLEtBQUFrQixNQUFBYyxFQUFBaEcsR0FBQWtHLFNBQ0EsTUFDQSxLQUFBLE9BRUFsQyxFQUFBLEtBQUFrQixNQUFBYyxFQUFBaEcsR0FBQWtHLFNBQ0EsTUFDQSxLQUFBLFFBRUFsQyxFQUFBLEtBQUFrQixNQUFBYyxFQUFBaEcsR0FBQWtHLFNBQ0EsTUFDQSxLQUFBLFlBRUFsQyxFQUFBLE1BQUFrQixNQUFBYyxFQUFBaEcsR0FBQWtHLGFBY0FsSSxTQUFBQyxPQUFBLFdBQUEwSSxXQUFBLHFCQUFBLFNBQUEsUUFBQSxVQUFBLGlCQUFBLGFBQUEsaUJBQUEscUJBQUFsRyIsImZpbGUiOiJwcm9maWxlLXBhZ2UubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IEJyZWNodCBvbiAyMS8xMS8yMDE1LlxuICovXG5cbmFuZ3VsYXIubW9kdWxlKCdldmVudCcsW10pO1xuYW5ndWxhci5tb2R1bGUoJ3Byb2ZpbGUnLFsnbmdNZXNzYWdlcycsJ25nQW5pbWF0ZScsJ3VpLmJvb3RzdHJhcCddKTtcbmFuZ3VsYXIubW9kdWxlKCdhdXRoJyxbJ25nTWVzc2FnZXMnXSk7XG5hbmd1bGFyLm1vZHVsZSgnYWRtaW4nLFtdKTtcblxuXG5cblxuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IEJyZWNodCBvbiAxMi8xMi8yMDE1LlxuICovXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgbVN0YXR1c1NlcnZpY2UgPSBmdW5jdGlvbigkaHR0cCkge1xuXG4gICAgICAgIHZhciBtU3RhdHVzID0gZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciB1cmwgPSAnL2FwaS9zdGF0dXMnO1xuICAgICAgICAgICAgcmV0dXJuICAkaHR0cCh7bWV0aG9kOiAnR0VUJywgdXJsOiB1cmx9KS50aGVuKHN1Y2Nlc3NDYWxsYmFjayxlcnJvckNhbGxiYWNrKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbHVyZTogXCIgKyByZXNwb25zZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0TVN0YXR1czogbVN0YXR1c1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdwcm9maWxlJykuZmFjdG9yeSgnbVN0YXR1c1NlcnZpY2UnLFsnJGh0dHAnLG1TdGF0dXNTZXJ2aWNlXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBCcmVjaHQgb24gMTgvMTIvMjAxNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGpvYlNlcnZpY2UgPSBmdW5jdGlvbigkaHR0cCkge1xuICAgICAgICB2YXIgam9icyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgdXJsID0gJy9hcGkvam9icyc7XG4gICAgICAgICAgICByZXR1cm4gICRodHRwKHttZXRob2Q6ICdHRVQnLCB1cmw6IHVybH0pLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLGVycm9yQ2FsbGJhY2spO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBzdWNjZXNzQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZnVuY3Rpb24gZXJyb3JDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGYWlsdXJlOiBcIiArIHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm57XG4gICAgICAgICAgICBnZXRKb2JzOiBqb2JzXG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3Byb2ZpbGUnKS5mYWN0b3J5KCdqb2JTZXJ2aWNlJyxbJyRodHRwJyxqb2JTZXJ2aWNlXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBCcmVjaHQgb24gMTgvMTIvMjAxNS5cbiAqL1xuKGZ1bmN0aW9uKCl7XG4gICAgdmFyIGNvdW50cnlTZXJ2aWNlID0gZnVuY3Rpb24oJGh0dHApIHtcbiAgICAgICAgdmFyIGNvdW50cmllcyA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgdXJsID0gJy9hcGkvY291bnRyaWVzJztcbiAgICAgICAgICAgIHJldHVybiAgJGh0dHAoe21ldGhvZDogJ0dFVCcsIHVybDogdXJsfSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssZXJyb3JDYWxsYmFjayk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhaWx1cmU6IFwiICsgcmVzcG9uc2UpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJue1xuICAgICAgICAgICAgZ2V0Q291bnRyaWVzOiBjb3VudHJpZXNcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdwcm9maWxlJykuZmFjdG9yeSgnY291bnRyeVNlcnZpY2UnLFsnJGh0dHAnLGNvdW50cnlTZXJ2aWNlXSk7XG59KSgpOyIsIi8qKlxuICogQ3JlYXRlZCBieSBCcmVjaHQgb24gMS8wMS8yMDE2LlxuICovXG4oZnVuY3Rpb24oKXtcbiAgICB2YXIgY2VydGFpblVzZXJTZXJ2aWNlID0gZnVuY3Rpb24oJGh0dHApIHtcbiAgICAgICAgdmFyIFF1ZXJ5U3RyaW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHF1ZXJ5X3N0cmluZyA9e307XG4gICAgICAgICAgICB2YXIgcXVlcnkgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIHZhciB2YXJzID0gcXVlcnkuc3BsaXQoXCImXCIpO1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wO2k8dmFycy5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KFwiPVwiKTtcbiAgICAgICAgICAgICAgICAvLyBJZiBmaXJzdCBlbnRyeSB3aXRoIHRoaXMgbmFtZVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcXVlcnlfc3RyaW5nW3BhaXJbMF1dID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5X3N0cmluZ1twYWlyWzBdXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgc2Vjb25kIGVudHJ5IHdpdGggdGhpcyBuYW1lXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcXVlcnlfc3RyaW5nW3BhaXJbMF1dID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBhcnIgPSBbIHF1ZXJ5X3N0cmluZ1twYWlyWzBdXSxkZWNvZGVVUklDb21wb25lbnQocGFpclsxXSkgXTtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlfc3RyaW5nW3BhaXJbMF1dID0gYXJyO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlyZCBvciBsYXRlciBlbnRyeSB3aXRoIHRoaXMgbmFtZVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5X3N0cmluZ1twYWlyWzBdXS5wdXNoKGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5X3N0cmluZztcbiAgICAgICAgfSgpO1xuICAgICAgICB2YXIgYnlJZCA9IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgdXJsID0gJy9hcGkvcHJvZmlsZS86X2lkP2lkPScrUXVlcnlTdHJpbmcuaWQ7XG4gICAgICAgICAgICByZXR1cm4gICRodHRwKHttZXRob2Q6ICdHRVQnLCB1cmw6IHVybH0pLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLGVycm9yQ2FsbGJhY2spO1xuICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2socmVzcG9uc2Upe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbHVyZTogXCIgK3Jlc3BvbnNlLmRhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybntcbiAgICAgICAgICAgIGdldEJ5SWQ6IGJ5SWRcbiAgICAgICAgfVxuXG5cbiAgICB9O1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ3Byb2ZpbGUnKS5mYWN0b3J5KCdjZXJ0YWluVXNlclNlcnZpY2UnLFsnJGh0dHAnLGNlcnRhaW5Vc2VyU2VydmljZV0pO1xufSkoKTsiLCIvKipcbiAqIENyZWF0ZWQgYnkgQnJlY2h0IG9uIDgvMTIvMjAxNS5cbiAqL1xuXG4oZnVuY3Rpb24oKXtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBQcm9maWxlQ29udHJvbGxlciA9IGZ1bmN0aW9uKCRzY29wZSwkaHR0cCwkd2luZG93LG1TdGF0dXNTZXJ2aWNlLGpvYlNlcnZpY2UsY291bnRyeVNlcnZpY2UsY2VydGFpblVzZXJTZXJ2aWNlKVxuICAgIHtcbiAgICAgICAgLy8gR0VUIE1hcml0YWwgc3RhdHVzLCBKb2JzLCBDb3VudHJpZXMgJiBDaXRpZXMgZnJvbSBTZXJ2aWNlcyArIGFkZCB0aGVtIHRvIHNjb3BlXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgIG1TdGF0dXNTZXJ2aWNlLmdldE1TdGF0dXMoKS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cyA9IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGpvYlNlcnZpY2UuZ2V0Sm9icygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAkc2NvcGUuam9icyA9IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvdW50cnlTZXJ2aWNlLmdldENvdW50cmllcygpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAkc2NvcGUuY291bnRyaWVzID0gZGF0YTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2VydGFpblVzZXJTZXJ2aWNlLmdldEJ5SWQoKS50aGVuKGZ1bmN0aW9uKGRhdGEpe1xuICAgICAgICAgICAgJHNjb3BlLnByb2ZpbGUgPSBkYXRhO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8vIFN1Ym1pdCBmb3JtIHByb2ZpbGUgc2V0dGluZ3NcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAgICAgJHNjb3BlLnN1Ym1pdEZvcm0gPSBmdW5jdGlvbigpe1xuXG4gICAgICAgICAgICAkc2NvcGUuZm9ybURhdGEgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgZmlyc3ROYW1lOiB0aGlzLmZpcnN0TmFtZSxcbiAgICAgICAgICAgICAgICBsYXN0TmFtZTogdGhpcy5sYXN0TmFtZSxcbiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5lbWFpbCxcbiAgICAgICAgICAgICAgICBnZW5kZXI6IHRoaXMuZ2VuZGVyLFxuICAgICAgICAgICAgICAgIG1hcml0YWw6IHRoaXMubWFyaXRhbC5uYW1lLFxuICAgICAgICAgICAgICAgIGJpcnRoZGF5OiB0aGlzLmR0LFxuICAgICAgICAgICAgICAgIHdvcms6IHRoaXMud29yay5uYW1lLFxuICAgICAgICAgICAgICAgIGNvdW50cnk6IHRoaXMuY291bnRyeS5uYW1lLFxuICAgICAgICAgICAgICAgIGNpdHk6IHRoaXMuY2l0eSxcbiAgICAgICAgICAgICAgICBpbnRlcmVzdHM6IHRoaXMuaW50ZXJlc3RzLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmRlc2NyaXB0aW9uXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRodHRwLnBvc3QoXCIvYXBpL3Byb2ZpbGUvOmlkXCIsICRzY29wZS5mb3JtRGF0YSkudGhlbihzdWNjZXNzQ2FsbGJhY2ssZXJyb3JDYWxsYmFjayk7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHN1Y2Nlc3NDYWxsYmFjayhyZXNwb25zZSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKFwiRmFpbHVyZTogXCIgKyByZXNwb25zZS5kYXRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuXG5cblxuICAgICAgICAkc2NvcGUudG9kYXkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5kdCA9IG5ldyBEYXRlKCk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS50b2RheSgpO1xuXG4gICAgICAgICRzY29wZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICRzY29wZS5kdCA9IG51bGw7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gRGlzYWJsZSB3ZWVrZW5kIHNlbGVjdGlvblxuICAgICAgICAkc2NvcGUuZGlzYWJsZWQgPSBmdW5jdGlvbihkYXRlLCBtb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gKCBtb2RlID09PSAnZGF5JyAmJiAoIGRhdGUuZ2V0RGF5KCkgPT09IDAgfHwgZGF0ZS5nZXREYXkoKSA9PT0gNiApICk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLnRvZ2dsZU1pbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLm1pbkRhdGUgPSBuZXcgRGF0ZSgxOTAwLDEsMSlcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnRvZ2dsZU1pbigpO1xuICAgICAgICAkc2NvcGUubWF4RGF0ZSA9IG5ldyBEYXRlKDIwMjAsIDUsIDIyKTtcblxuICAgICAgICAkc2NvcGUub3BlbiA9IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnN0YXR1cy5vcGVuZWQgPSB0cnVlO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5zZXREYXRlID0gZnVuY3Rpb24oeWVhciwgbW9udGgsIGRheSkge1xuICAgICAgICAgICAgJHNjb3BlLmR0ID0gbmV3IERhdGUoeWVhciwgbW9udGgsIGRheSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmRhdGVPcHRpb25zID0ge1xuICAgICAgICAgICAgZm9ybWF0WWVhcjogJ3l5JyxcbiAgICAgICAgICAgIHN0YXJ0aW5nRGF5OiAxXG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmZvcm1hdHMgPSBbJ2RkLU1NTU0teXl5eScsICd5eXl5L01NL2RkJywgJ2RkLk1NLnl5eXknLCAnc2hvcnREYXRlJ107XG4gICAgICAgICRzY29wZS5mb3JtYXQgPSAkc2NvcGUuZm9ybWF0c1swXTtcblxuICAgICAgICAkc2NvcGUuc3RhdHVzID0ge1xuICAgICAgICAgICAgb3BlbmVkOiBmYWxzZVxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB0b21vcnJvdyA9IG5ldyBEYXRlKCk7XG4gICAgICAgIHRvbW9ycm93LnNldERhdGUodG9tb3Jyb3cuZ2V0RGF0ZSgpICsgMSk7XG4gICAgICAgIHZhciBhZnRlclRvbW9ycm93ID0gbmV3IERhdGUoKTtcbiAgICAgICAgYWZ0ZXJUb21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDIpO1xuICAgICAgICAkc2NvcGUuZXZlbnRzID1cbiAgICAgICAgICAgIFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IHRvbW9ycm93LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdmdWxsJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkYXRlOiBhZnRlclRvbW9ycm93LFxuICAgICAgICAgICAgICAgICAgICBzdGF0dXM6ICdwYXJ0aWFsbHknXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgXTtcblxuICAgICAgICAkc2NvcGUuZ2V0RGF5Q2xhc3MgPSBmdW5jdGlvbihkYXRlLCBtb2RlKSB7XG4gICAgICAgICAgICBpZiAobW9kZSA9PT0gJ2RheScpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGF5VG9DaGVjayA9IG5ldyBEYXRlKGRhdGUpLnNldEhvdXJzKDAsMCwwLDApO1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wO2k8JHNjb3BlLmV2ZW50cy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJlbnREYXkgPSBuZXcgRGF0ZSgkc2NvcGUuZXZlbnRzW2ldLmRhdGUpLnNldEhvdXJzKDAsMCwwLDApO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXlUb0NoZWNrID09PSBjdXJyZW50RGF5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmV2ZW50c1tpXS5zdGF0dXM7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuc2F2ZUVkaXR0ZWRFdmVudCA9IGZ1bmN0aW9uKClcbiAgICAgICAge1xuXG4gICAgICAgICAgICAvL2V2ZW50IGRhdGEgb3BzbGFhblxuICAgICAgICAgICAgdmFyIHZlbGRlbiA9IGlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIik7XG4gICAgICAgICAgICB2YXIgZGVzYyA9IGlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIilbMF07XG4gICAgICAgICAgICB2YXIgZHJvcGRvd24gPSBpbnB1dC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNlbGVjdFwiKVswXTtcbiAgICAgICAgICAgIHZhciBmb3JtID0gdmVsZGVuWzBdLmNsb3Nlc3QoXCJmb3JtXCIpO1xuXG5cblxuICAgICAgICAgICAvKiAkaHR0cC5nZXQoXCJodHRwOi8vbWFwcy5nb29nbGVhcGlzLmNvbS9tYXBzL2FwaS9nZW9jb2RlL2pzb24/YWRkcmVzcz1NZXVsZWJla2Ura3JpbmtlbHN0cmFhdCZrZXk9QUl6YVN5QWlhcHlnUkxDNmEzTy1weVhhaFUybDQ3SThwTVYyUGR3XCIpLnRoZW4oc3VjY2Vzc0NhbGxiYWNrLGVycm9yQ2FsbGJhY2spO1xuXG4gICAgICAgICAgICAgZnVuY3Rpb24gc3VjY2Vzc0NhbGxiYWNrKHJlc3BvbnNlKXtcbiAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICBmdW5jdGlvbiBlcnJvckNhbGxiYWNrKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRmFpbHVyZTogXCIgKyByZXNwb25zZS5kYXRhKVxuICAgICAgICAgICAgIH0qL1xuICAgICAgICAgICAgdmFyIHhtbGxvY2F0aW9uID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICB4bWxsb2NhdGlvbi5vcGVuKFwiR0VUXCIsXCJodHRwczovL21hcHMuZ29vZ2xlYXBpcy5jb20vbWFwcy9hcGkvZ2VvY29kZS9qc29uP2FkZHJlc3M9TWV1bGViZWtlK2tyaW5rZWxzdHJhYXQma2V5PUFJemFTeUFpYXB5Z1JMQzZhM08tcHlYYWhVMmw0N0k4cE1WMlBkd1wiLCB0cnVlKTtcblxuICAgICAgICAgICAgeG1sbG9jYXRpb24ub25sb2FkPWZ1bmN0aW9uKGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICB2YXIgZ2VnZXZlcyA9IEpTT04ucGFyc2UoeG1sbG9jYXRpb24ucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSBnZWdldmVzW1wicmVzdWx0c1wiXVswXVtcImdlb21ldHJ5XCJdW1wibG9jYXRpb25cIl07XG4gICAgICAgICAgICAgICAgdmFyIGxhdCA9IGxvY2F0aW9uW1wibGF0XCJdO1xuICAgICAgICAgICAgICAgIHZhciBsbmcgPSBsb2NhdGlvbltcImxuZ1wiXTtcblxuICAgICAgICAgICAgICAgIHZhciBtaWpub2JqZWN0amUgPSB7XG4gICAgICAgICAgICAgICAgICAgICdpZCc6Zm9ybS5pZCxcbiAgICAgICAgICAgICAgICAgICAgJ3BpY3R1cmUnOnZlbGRlbltcInBpY3R1cmVVcmxcIl0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICd0aXRsZSc6dmVsZGVuW1wiZXRpdGxlXCJdLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAnZGF0ZSc6dmVsZGVuW1wiZGF0ZVwiXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgJ3RpbWUnOnZlbGRlbltcInRpbWVcIl0udmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICdsb2NhdGlvbic6dmVsZGVuW1wiTG9jYXRpb25cIl0udmFsdWUgK1wiLy4vXCIrbGF0K1wiLy4vXCIrbG5nLFxuICAgICAgICAgICAgICAgICAgICAnZ3JvdXAnOmRyb3Bkb3duLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICAnY29zdCc6dmVsZGVuW1wiY29zdFwiXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgJ3Nsb3RzJzp2ZWxkZW5bXCJzbG90c1wiXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgJ2Rlc2NyaXB0aW9uJzpkZXNjLnZhbHVlXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhtaWpub2JqZWN0amUpO1xuICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKFwiUE9TVFwiLFwiL2FwaS9wcm9maWxlL3VwZGF0ZUV2ZW50XCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICAgICAgeG1sSHR0cC5vbmxvYWQ9ZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmxvY2F0aW9uLnJlbG9hZCh0cnVlKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHhtbEh0dHAuc2VuZChKU09OLnN0cmluZ2lmeShtaWpub2JqZWN0amUpKTtcblxuXG5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4bWxsb2NhdGlvbi5zZW5kKG51bGwpO1xuXG5cbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuZGVsZXRlRXZlbnQ9IGZ1bmN0aW9uKCRldmVudClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRyID0gJGV2ZW50LmN1cnJlbnRUYXJnZXQuY2xvc2VzdCgndHInKTtcbiAgICAgICAgICAgIHZhciBlbGVtZW50ZW4gPSB0ci5nZXRFbGVtZW50c0J5VGFnTmFtZShcInRkXCIpO1xuICAgICAgICAgICAgdmFyIGlkID0gZWxlbWVudGVuWzFdLmNoaWxkcmVuWzJdLmlubmVyVGV4dDtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZWxlbWVudGVuWzFdLmNoaWxkcmVuWzJdKTtcblxuICAgICAgICAgICAgdmFyIGRlbGV0ZUV2ZW50ID0gJHdpbmRvdy5jb25maXJtKCdBcmUgeW91IGFic29sdXRlbHkgc3VyZSB5b3Ugd2FudCB0byBkZWxldGU/Jyk7XG4gICAgICAgICAgICBpZihkZWxldGVFdmVudClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgbWlqbm9iamVjdGplID0ge1xuICAgICAgICAgICAgICAgICAgICAnaWQnIDogaWRcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHZhciB4bWxIdHRwID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgeG1sSHR0cC5vcGVuKFwiUE9TVFwiLFwiL2FwaS9wcm9maWxlL2RlbGV0ZUV2ZW50XCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHhtbEh0dHAuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLCBcImFwcGxpY2F0aW9uL2pzb25cIik7XG4gICAgICAgICAgICAgICAgeG1sSHR0cC5zZW5kKEpTT04uc3RyaW5naWZ5KG1pam5vYmplY3RqZSkpO1xuICAgICAgICAgICAgICAgIHhtbEh0dHAub25sb2FkPWZ1bmN0aW9uKGUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5sb2NhdGlvbi5yZWxvYWQodHJ1ZSk7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuZWRpdEV2ZW50ID0gZnVuY3Rpb24oJGV2ZW50KVxuICAgICAgICB7XG5cbiAgICAgICAgICAgIHZhciB0ciA9ICRldmVudC5jdXJyZW50VGFyZ2V0LmNsb3Nlc3QoJ3RyJyk7XG4gICAgICAgICAgICB2YXIgZWxlbWVudGVuID0gdHIuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJ0ZFwiKTtcbiAgICAgICAgICAgIHZhciBsZW5ndGUgPSBlbGVtZW50ZW4ubGVuZ3RoO1xuXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImlucHV0XCIpO1xuICAgICAgICAgICAgdmFyIHZlbGRlbiA9IGlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaW5wdXRcIik7XG4gICAgICAgICAgICB2YXIgZGVzYyA9IGlucHV0LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwidGV4dGFyZWFcIilbMF07XG4gICAgICAgICAgICB2YXIgZm9ybSA9IHZlbGRlblswXS5jbG9zZXN0KFwiZm9ybVwiKTtcblxuXG5cbiAgICAgICAgICAgICRzY29wZS51cGRhdGluZyA9IHRydWU7IC8vd2Vya3QgbmlldCBiY2F1c2UgYW5ndWxhclxuXG4gICAgICAgICAgICBmb3IodmFyIGkgPSBsZW5ndGU7aS0tOylcbiAgICAgICAgICAgIHtcblxuICAgICAgICAgICAgICAgIHZhciBjbGFzc25hbWUgPSBlbGVtZW50ZW5baV0uY2xhc3NOYW1lLnNwbGl0KFwiIFwiKTtcblxuICAgICAgICAgICAgICAgIHZhciB0ZXN0ID0gY2xhc3NuYW1lW2NsYXNzbmFtZS5sZW5ndGgtMV07XG4gICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZXN0KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2godGVzdClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJpbWFnZVwiOlxuICAgICAgICAgICAgICAgICAgICAgICAgLy8vY29uc29sZS5sb2coXCJpbWFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcIm5hbWVcIjpcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmVsZGVuW1wiZXRpdGxlXCJdLnZhbHVlPWVsZW1lbnRlbltpXS5pbm5lclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ZWxkZW5bXCJMb2NhdGlvblwiXS52YWx1ZSA9IGVsZW1lbnRlbltpXS5jaGlsZHJlblsxXS5pbm5lclRleHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnZhbHVlPSBlbGVtZW50ZW5baV0uY2hpbGRyZW5bMF0uaW5uZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybS5pZD1lbGVtZW50ZW5baV0uY2hpbGRyZW5bMl0uaW5uZXJUZXh0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRhdGVcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJkYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVsZGVuW1wiZGF0ZVwiXS52YWx1ZT1lbGVtZW50ZW5baV0uaW5uZXJUZXh0O1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ0aW1lXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwidGltZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlbGRlbltcInRpbWVcIl0udmFsdWU9ZWxlbWVudGVuW2ldLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwicHJpY2VcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coXCJwcmljZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlbGRlbltcImNvc3RcIl0udmFsdWU9ZWxlbWVudGVuW2ldLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwibWF4TWVtYmVyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKFwibWVtYmVyXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmVsZGVuW1wic2xvdHNcIl0udmFsdWU9ZWxlbWVudGVuW2ldLmlubmVyVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgfTtcblxuXG5cbiAgICBhbmd1bGFyLm1vZHVsZShcInByb2ZpbGVcIikuY29udHJvbGxlcignUHJvZmlsZUNvbnRyb2xsZXInLFsnJHNjb3BlJywnJGh0dHAnLCckd2luZG93JywnbVN0YXR1c1NlcnZpY2UnLCdqb2JTZXJ2aWNlJywnY291bnRyeVNlcnZpY2UnLCdjZXJ0YWluVXNlclNlcnZpY2UnLFByb2ZpbGVDb250cm9sbGVyXSk7XG5cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
